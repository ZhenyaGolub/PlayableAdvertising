"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var $score=document.querySelector("#score"),$question=document.querySelector("#question"),$advertising=document.querySelector("#advertising"),$background=document.querySelector("#background"),$result=document.querySelector("#result"),$umbrellas=document.querySelectorAll("#umbrella"),$continue=document.querySelector("#continue"),audio=new Audio("../audio/click.mp3"),Score=function(){function e(){_classCallCheck(this,e),this.$result=$result,this.foundUmbrellas=0,this.score="".concat(this.foundUmbrellas," / 5")}return _createClass(e,[{key:"render",value:function(){this.$result.innerHTML=this.score}},{key:"find",value:function(){this.foundUmbrellas=this.foundUmbrellas+1,this.score="".concat(this.foundUmbrellas," / 5"),this.render()}}]),e}(),score=new Score;score.render();var startAnimation=function(){setTimeout((function(){$score.classList.add("score-animation"),$background.classList.add("background-animation"),$background.classList.add("mask-disappearance"),$question.classList.add("question-animation"),$background.addEventListener("transitionend",(function(){$background.classList.add("mask-disappearance-index")})),$question.addEventListener("transitionend",(function(){$question.style.display="none",initializationFind()}))}),1e3)},calculateDifference=function(e){return Number(e.slice(0,e.length-2))/2},effect=function(e,n){var t=document.createElement("div"),i=document.createElement("img");return t.classList.add("effect"),setTimeout((function(){t.classList.add("effect-animation")}),0),i.setAttribute("src","./images/effect.gif"),i.setAttribute("alt","effect"),i.style.width="170px",t.append(i),t.style.left=e-calculateDifference(i.style.width)+"px",t.style.top=n-calculateDifference(i.style.width)+"px",t.addEventListener("transitionend",(function(){t.style.display="none"})),t},scoreEffect=function(){var e=document.createElement("div");e.classList.add("score-effect");var n=document.createElement("img");return n.setAttribute("src","./images/score-effect.gif"),n.setAttribute("alt","score-effect"),e.append(n),e.addEventListener("transitionend",(function(){e.style.display="none"})),setTimeout((function(){e.classList.add("score-effect-animation")}),0),e},find=function e(n){var t=Math.round(n.clientX-$background.getBoundingClientRect().x),i=Math.round(n.clientY-$background.getBoundingClientRect().y);$background.append(effect(t,i)),$advertising.append(scoreEffect()),audio.play();var a=n.target;a.classList.contains("umbella")?(score.find(),a.classList.add("umbrella-animation")):(score.find(),a.parentNode.classList.add("umbrella-animation")),3===score.foundUmbrellas&&($umbrellas.forEach((function(n){n.removeEventListener("click",e),n.removeEventListener("transitionend",(function(){n.style.display="none"}))})),$background.addEventListener("transitionend",(function(){$background.classList.add("mask-appearance-index")})),setTimeout((function(){$background.classList.remove("background-animation"),$background.classList.add("background-animation-end"),$background.classList.add("mask-appearance"),$score.classList.add("score-animation-end")}),1e3),setTimeout((function(){$continue.style.display="block"}),2e3))},initializationFind=function(){$umbrellas.forEach((function(e){e.addEventListener("click",find),e.addEventListener("transitionend",(function(){e.style.display="none"}))})),$score.addEventListener("transitionend",(function(){$score.style.display="none"}))};startAnimation();